<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:sec="http://www.springframework.org/security/facelets/tags"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
   <h:head>
      <title>Doctor</title>
      <h:outputStylesheet library="css" name="dist.css" />
      <h:outputStylesheet library="css" name="villa.css" />
      <h:outputStylesheet library="css" name="villa-doctor.css" />
      <h:outputScript library="js" name="jquery-ui.min.js" />
      <h:outputScript library="js" name="jquery.datetimepicker.js" />
      <h:outputScript library="js" name="jquery.inputmask.js"/>
      <h:outputScript library="js" name="jquery.maskMoney.min.js" />
      <h:outputScript library="js" name="dist.js" />
      <link rel="icon" href="#{resource['img:favicon.ico']}" type="image/x-ico"/>
   </h:head>
   <h:body>
      <h:form>
         <h:dataTable id="tblPacientes"
                      var="lista" 
                      styleClass="table table-hover"
                      value="#{agendaMB.listarPorProfissional}">

            <h:inputHidden value="#{lista.id}"></h:inputHidden>

            <f:facet name="header">
               LISTA DE AGENDAMENTOS
            </f:facet>

            <h:column>
               <f:facet name="header">
                  <h:outputText value="Horário Inicio Agendamento"></h:outputText>
               </f:facet>
               <h:outputText value="#{lista.dtHrIniAg}">
                  <f:converter converterId="dataHoraConverter"/>
               </h:outputText>
            </h:column>

            <h:column>
               <f:facet name="header">
                  <h:outputText value="Horário Fim Agendamento"></h:outputText>
               </f:facet>
               <h:outputText value="#{lista.dtHrFimAg}">
                  <f:converter converterId="dataHoraConverter"/>
               </h:outputText>
            </h:column>

            <h:column>
               <f:facet name="header">
                  <h:outputText value="Horário Chegada"></h:outputText>
               </f:facet>
               <h:outputText value="#{lista.dtHrChegada}">
                  <f:converter converterId="dataHoraConverter"/>
               </h:outputText>
            </h:column>

            <h:column>
               <f:facet name="header">
                  <h:outputText value="Paciente"></h:outputText>
               </f:facet>
               <h:outputText value="#{lista.paciente.nome}">
               </h:outputText>
            </h:column>

            <h:column>
               <f:facet name="header">
                  <h:outputText value="Convênio"></h:outputText>
               </f:facet>
               <h:outputText value="#{lista.convenio.nomeFantasia}">
               </h:outputText>
            </h:column>

            <h:column>
               <f:facet name="header">
                  <h:outputText value="Profissional"></h:outputText>
               </f:facet>
               <h:outputText value="#{lista.profissional.nome}">
               </h:outputText>
            </h:column>

            <h:column>
               <f:facet name="header">
                  <h:outputText value="Especialidade"></h:outputText>
               </f:facet>
               <h:outputText value="#{lista.especialidade.nome}">
               </h:outputText>
            </h:column>

            <h:column>
               <f:facet name="header">
                  <h:outputText value="Notas do Agendamento"></h:outputText>
               </f:facet>
               <h:outputText value="#{lista.notasAgenda}"/>
            </h:column>


            <h:column>
               <f:facet name="header">
                  <h:outputText value="Chegou"></h:outputText>
               </f:facet>
               <h:commandLink title="Chegou" 
                              action="#{agendaMB.adicionarSalaEspera}">                                       
                  <center>
                     <span class="icon-circle-o"></span>
                  </center>
                  <f:setPropertyActionListener target="#{agendaMB.agenda}" value="#{lista}"></f:setPropertyActionListener>
                  <f:ajax execute="@form" render="@form"/>
               </h:commandLink>
            </h:column>

         </h:dataTable> 
      </h:form>
   </h:body>
</html>

